<?php
ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ MySQL Dump ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


sudo mysqldump -u root live_bluemountain_portal > live_bluemountain_portal_`date '+%d-%m-%Y_%H-%M'`.sql

sudo mysqldump --no-data -u root getlittleblue_test > getlittleblue_test_`date '+%d-%m-%Y_%H-%M'`.sql

sudo mysql -u root EasyJetBigBlue < EasyJetBigBlue

sudo mysqldump -u root --all-databases | gzip -9 > backup_`date '+%d-%m-%Y_%H-%M'`.sql.gz

sudo mysql -u root -p < alldb.sql

select * from employees where activated is NULL;

update users, employees set users.active=1, employees.activated = now() where users.id = employees.user_id and employees.activated is NULL;


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ cron to remove files/folders & backups ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


//----- cron to remove files/folders

@hourly find /backup/mysql_dump/hourly/ -d -mmin +1440 -exec rm -rf {} \; && find /backup/mysql_dump/hourly/ -type d -empty -exec rmdir {} \;
@daily find /backup/mysql_dump/daily/ -d -mmin +10080 -exec rm -fr {} \; && find /backup/mysql_dump/daily/ -type d -empty -exec rmdir {} \;


//----- cron to run the backups
@hourly /home/nudge.sorin/mysqldump_hourly.sh
@midnight /home/nudge.sorin/mysqldump_daily.sh

! /bin/bash

TIMESTAMP=$(date +"%F_%H-%M")
BACKUP_DIR="/backup/mysql_dump/daily/$TIMESTAMP"
#MYSQL_USER="nudge.sorin"
#MYSQL=/usr/bin/mysql
#MYSQL_PASSWORD="pylHRW2fGX"
#MYSQLDUMP=/usr/bin/mysqldump

mkdir -p "$BACKUP_DIR/"

databases=`mysql --defaults-file=/root/.my.cnf -e "SHOW DATABASES;" | grep -Ev "(Database|information_schema|performance_schema)"`

for db in $databases; do
mysqldump --defaults-file=/root/.my.cnf --databases $db | gzip > "$BACKUP_DIR/$dbcd ../.gz"
done


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ mysql Search/Replace ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


update employees set salary = replace(salary, '?', '') where created like '2015-05-15%';


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ mysql Select based on another field ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


select count(*) from employees where employees.user_id IN (select users.id from users where company='ADMIN');



ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ remote mysqldump ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ssh -f -L3310:localhost:3306 nudge.sorin@10.181.105.132 -N

mysqldump -P 3310 -h 127.0.0.1 -u develop_user -p EasyJetBigBlue

mysqldump --defaults-file=/var/www/vhosts/db_backups/.my.cnf -P 3306 -h 10.181.105.132 EasyJetBigBlue > db_backup.sql --skip-ssl


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ grant user to database ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


GRANT ALL ON des_db.* TO 'des_db_user'@'10.181.134.193' IDENTIFIED BY '3f3021806e4b811ddaf8bbda4d98ce9';
FLUSH PRIVILEGES;


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ PPF ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


mysql -u ppf_db_user -p -h 3f3419ff3c5bce4d6bbdf3dde021be91f009af5c.rackspaceclouddb.com

sudo mysqldump -u ppf_db_user -p -h 3f3419ff3c5bce4d6bbdf3dde021be91f009af5c.rackspaceclouddb.com ppf_staging_db > ppf_staging_db_`date '+%d-%m-%Y_%H-%M'`.sql

sudo mysql -u ppf_db_user -p -h 3f3419ff3c5bce4d6bbdf3dde021be91f009af5c.rackspaceclouddb.com ppf_staging_db < ppf_dev.sql


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ DES ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Export UAT DB:
sudo mysqldump -u root -p wordpress > des_db_`date '+%d-%m-%Y_%H-%M'`.sql


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Import Live DB:
sudo mysql des_db < des_db.sql


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Compress wp-content/uploads folder:
sudo tar -cvzf uploads.tar.gz wp-content/uploads


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Search and replace:
http://des.nudgeclients.co.uk
https://des.mod.uk

http:\\/\\/des.nudgeclients.co.uk
https:\\/\\/des.mod.uk

http%3A%2F%2Fdes.nudgeclients.co.uk
https://des.mod.uk

des.nudgeclients.co.uk
des.mod.uk

http://des.mod.uk
https://des.mod.uk


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Webserver:
146.177.40.176
192.168.184.176
10.149.110.98


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Database server:
146.177.40.177
192.168.183.177
10.149.110.66


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


GRANT ALL ON danone_careers.* TO 'des_db_user'@'192.168.184.176' IDENTIFIED BY '3f3021806e4b811ddaf8bbda4d98ce9';
FLUSH PRIVILEGES;


show grants for 'wordpressuser'@'web_server_IP';


mysql -u des_db_user -p -h 192.168.183.177



DROP USER 'des_db_user'@'10.149.110.98';

update mysql.users set Host = 192.168.184.176 where Host = 10.149.110.66;
flush privileges;

SELECT User,Host FROM mysql.user;



AuthType Basic
AuthName "Protected"
AuthUserFile "/var/www/des.htpasswd"
require valid-user
AuthType Basic


des:$apr1$wfx0W7bA$0uMAZXK4/eT2lw536sjC1.

Prod htaccess:
des
JrFgWzpBct17EyZ7PPeQ


RewriteEngine On 
RewriteCond %{SERVER_PORT} 80
RewriteCond %{HTTP_HOST} ^(www\.)?des\.mod.uk
RewriteRule ^(.*)$ https://www.des.mod.uk/$1 [R,L]


git cherry-pick c61296413b2b1cfd8286a6b70bb7c3134153fdfa -X theirs



sudo vi /etc/httpd/conf.d/ppf.nudgeclients.co.uk.conf


composer create-project drupal-composer/drupal-project:8.x-dev roche-fphi --stability dev --no-interaction


sudo mysql -u root -p fxpludev_drupal < FalmouthExeterPlus-2018-08-23T11-42-51.mysql.gz


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


roche_fphi


openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/pki/tls/certs/localhost.key -out /etc/pki/tls/certs/localhost.crt

roche-fphi.nudgestaging.co.uk

developers@nudgedigital.co.uk


/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/fullchain.pem 

/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/privkey.pem

sudo docker cp -L 8bf2424aa6ff:/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/cert.pem ./
sudo docker cp -L 8bf2424aa6ff:/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/chain.pem ./
sudo docker cp -L 8bf2424aa6ff:/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/fullchain.pem ./
sudo docker cp -L 8bf2424aa6ff:/etc/letsencrypt/live/roche-fphi.nudgestaging.co.uk/privkey.pem ./


cert.pem -> ../../archive/roche-fphi.nudgestaging.co.uk/cert1.pem
chain.pem -> ../../archive/roche-fphi.nudgestaging.co.uk/chain1.pem
fullchain.pem -> ../../archive/roche-fphi.nudgestaging.co.uk/fullchain1.pem
privkey.pem -> ../../archive/roche-fphi.nudgestaging.co.uk/privkey1.pem


SSLCertificateFile      /etc/ssl/www/certificate.crt
            SSLCertificateKeyFile /etc/ssl/www/private.key

docker exec -it roche-fphi_webserver_1 /bin/bash



sudo service apache2 restart

sudo apache2 -t -D DUMP_VHOSTS


scp -C -i ./RocheStaging.pem -r /home/ec2-user/roche-fphi/docker/webserver/certs ./

Listen 192.168.33.10:80

sudo apt install php7.2-common
sudo apt install php-7.2-cli
sudo apt install php7.2-mongodb
sudo apt install php-pear
sudo apt install php7.2-dev


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ Mongo DB ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


[
    'name' => 'gm_post'
],
[
    'name' => 'gm_pre'
],
[
    'name' => 'gm_system'
],

mongo ds023858-a1.qfb27.fleet.mlab.com:23858/<dbname> -u <dbuser> -p <dbpassword>


mongodump -h ds023858-a1.qfb27.fleet.mlab.com:23858 -d gm_system -u ssecan -p Uwz8Py31heSQjF -o gm-dev_$(date +%Y-%m-%d)

mongodump -h ds023858-a1.qfb27.fleet.mlab.com:23858 -d gm_pre -u ssecan -p Uwz8Py31heSQjF -o gm-dev_$(date +%Y-%m-%d)

mongodump -h ds023858-a1.qfb27.fleet.mlab.com:23858 -d gm_post -u ssecan -p Uwz8Py31heSQjF -o gm-dev_$(date +%Y-%m-%d)

mongorestore -h "localhost:27017" --drop -d gm_system ./gm_system
mongorestore -h "localhost:27017" --drop -d gm_pre ./gm_pre
mongorestore -h "localhost:27017" --drop -d gm_post ./gm_post


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Swagger api documentation

/api/v1

Advance search > mongo aggregation

http://dev.grademaker.com


AB - awarding body

Tops admin
Super admin

heck@all.com
Password123

sudo apt install php7.0-cli php7.0-common php7.0-json php7.0-opcache php7.0-mbstring php7.0-mcrypt php.7.0-zip


./node_modules/.bin/gulp build-dev ./node_modules/.bin/gulp watch-dev

// Delivery
Office + floor + grademaker address


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


// Releases page

# Permissions
CRUD Admin view - TOPS Admin and Config
View - authenticated users

# API endpoints
- Add - POST
/api/v1/releases

- List - GET
/api/v1/releases

- Get by ID - GET
/api/v1/releases/{id}

- Update - PUT
/api/v1/releases/{id}

- Delete - DELETE
/api/v1/releases/{id}

# Database
# Create a model and run molequent commands to interact with the database
- id
- release number
- title
- description
- release date
- last updated
- created

# ReleasesPageController
# app/Http/Controllers/Api/ReleasesController
- listAll
- get
- add
- update
- delete

# Constraints
- Images can be uploaded to the description field using tinyMCE. (needs clarification)

ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


{title: 'Asset brief'}


{_id: ObjectId('5c70224e3bd2985bca62de64')}

5c6fe9573bd2982c0b1f6614



$workflow = Workflow::find($workflowId);
            $workflow->update($data);


                    {
            "type": "chrome",
            "request": "attach",
            "name": "Attach to Chrome",
            "port": 9222,
            "urlFilter": "http://local.grademaker.com/*",
            "webRoot": "${workspaceFolder}"
        }


New filters for item search: 1a05c41ab917017a6b98db43479b188f5bf08c40


case 'asset_type':
case 'asset_type_not':
	var assetTypeValue = $scope.customFilters.items.asset_type.values[data[prop]];
	var operator = prop === 'asset_type' ? 'is' : 'is_not';
	transformedCriteria.customFilters.push({
	  name: authoringSearchService.getCriteriaLabel('asset_type', operator, assetTypeValue),
	  data: {
	    key: 'asset_type',
	    operator: operator,
	    value: assetTypeValue,
	  }
	});
	$scope.customFilters.items.asset_type.used = true;
break;




http://local.grademaker.com/admin/awarding-bodies/languages

http://local.grademaker.com/api/v1/admin/awardingbody/56f1321fcc616ec31b3c6d0b?awardingbody_id=56f1321fcc616ec31b3c6d0b


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Language variants JS:

Done - Add new story to PT. 

Done - Update the initial story with the fact that the settings are not stored in the database but in config files (Jim asked). - done

Done - Add the awarding body language selection/variant to an API call and store it local storage.

Done - Set the locale in JS to the AB language and make sure the locale is being used by Lang.js

Done - Set Lang.js to use the variant loaded from the AB

Build command to separate the language/variant files in separate JSON files.

Extend Lang.js to use the separate language json files.

Add the new API call to the API documentation.



app/Http/routes_api.php



M@lam00t25

ss/s23/163648759


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


use GradeMaker\Http\Repositories\AuthoringAccessRepository;

AuthoringAccessRepository $authoringAccess,



db.shipwrecks.find({$or: [{"watlev": "always dry"}, {"depth": 0}]}).count()

boxOffice: [ { "country": "USA", "revenue": 228.4 },
             { "country": "Australia", "revenue": 19.6 },
             { "country": "UK", "revenue": 33.9 },
             { "country": "Germany", "revenue": 16.2 },
             { "country": "France", "revenue": 19.8 } ]

db.movieDetails.find({"boxOffice.country": "Germany", "boxOffice.revenue": {$gt: 17}})

db.movieDetails.find({"boxOffice.country": "Germany", "boxOffice.revenue": {$gt: 228}})

use video
martian = db.movieDetails.findOne({title: "The Martian"})
martian
delete martian._id;
martian
martian.boxOffice = [
    {"country": "USA", "revenue": 228.4},
    {"country": "Australia", "revenue": 19.6},
    {"country": "UK", "revenue": 33.9},
    {"country": "Germany", "revenue": 16.2},
    {"country": "France", "revenue": 19.8}
]
db.movieDetails.insertOne(martian);

db.movieDetails.find({boxOffice: {$elemMatch: {"country": "Germany", "revenue": {$gt: 17}}}})

db.movieDetails.find({boxOffice: {$elemMatch: {"country": "Germany", "revenue": {$gt: 16}}}})


db.scores.find({"results": 
	{$elemMatch: 
		{
			"results": {$gte: 70}, 
			"results": {$lt: 80}
		}
	}
}).count()

db.scores.find({$and: [{"results": {$gte: 70}},  {"results": {$lt: 80}}]}).count()


db.trips.find({$and: [{"tripduration": null},  {"tripduration": {$exists: true}}]}).count()

db.trips.find({"tripduration": null}).count()

db.trips.find({"tripduration": {$exists: false}})


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


db.movies.find({$or: [{"cast": "Jack Nicholson"}, {"cast": "John Huston"}]}).count()

db.movies.find(
	{"viewerRating": {$gt: 7}},
	{"mpaaRating": "R"}
	).count()

db.movies.find(
	{
		"cast": {$in: ["Jack Nicholson", "John Huston"]},
		"viewerRating": {$gt: 7},
		"mpaaRating": "R"
	}
	).count()



ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s24/160854903

Done - Load languages from the API.
Done - User changes language on the homescreen.
Done - Calls Angular Controller which sets cookie with user selected language.
Done - Then refreshes the page.
Done - The new language, is set in the Angular Controller, based on the cookie, on reload.
Done - User logs in and the language set in the cookie is saved against his data.
Done - The language set by the user has priority to the AB language (Laravel and JS).
DOne - If the AB has a variant against the language preffered by the user that will be used.
Done - Style the dropdown on the homepage.
Done - If no cookie set English is the default language.
Done - Set login screen/AB select/Forgotten password screens in that language.


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s24/164434334

React lang commit: c53c4c64880f97775f85be532f80e839621a1824

Separate lang files in multiple messages.js files (e.g. messages-en.js) using an artisan task.
Load the messages file server side based on AB or user selection.

head.blade.php

<script src="/js/messages-{{ GmAuth::getLanguage() }}.js?v={{ Config::get('build.timestamp') }}"></script>


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s24/164896081

Done - Import CSV file with language (Welsh).
Done - Convert it to a readable array.
Done - Export the current GM base language CSV file.
Done - Import it.
Done - Convert it to a readable array.
Done - Compare the two files.
Done - Get differences in a separate array.
Export that array to a csv.
Done - Remove the other used csv files.
Done - Integrate the new command with the import command.


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


Codeception Migrate:

Install java
https://www.digitalocean.com/community/tutorials/how-to-install-java-with-apt-on-ubuntu-18-04
sudo apt install default-jre
java -version

sudo apt install default-jdk
javac -version

Run Selenium

npm install -g selenium-standalone

node_modules/.bin/selenium-standalone install

node_modules/.bin/selenium-standalone start -- -port 4444

Locally:

seleniums

selenium start -- -port 4444

Run tests 

./vendor/bin/codecept run --help

./vendor/bin/codecept run acceptance tests/acceptance/SmokeTests/Workflows/ItemReviewerSendToReviewCest.php

./vendor/bin/codecept run acceptance tests/acceptance/ItemCest.php


./vendor/bin/codecept run api tests/api/Permissions/AssetManagerAccessCest.php


	--debug for debug output
	-vvvvvv adds verbosity

Migrate:

 /acceptance
 /support
 /api
 /configuration files
 	/acceptance.suite.yml
 	/api.suite.yml



  // $session = $this->mongo->gm_system->sessions
        //     ->find(['user_id' => new \MongoDB\BSON\ObjectId('5c879a59e66e350922307be9')])->toArray();



./vendor/bin/codecept run acceptance tests/acceptance/Authoring/UserCanDo/Asset/ItemSetterCanAddAndEditAssetCest.php


http://local.grademaker.com/author/item/edit/59c2b0f8807b8378cc2c7594

/**
 * @skip
 */


./vendor/bin/codecept run acceptance tests/acceptance/Authoring/UserCanDo/Asset/ItemSetterCanAddAndEditAssetCest.php


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s27/165246761


DONE - Add Archive menu item after Authoring - 
DONE - Add Archive mega menu "Area where archived items are papers can be found"
DONE - Display Archive menu items if Archive for AB enabled 
DONE - Archive listing page - authoring UI with the following changes (new page)
DONE 	- new route
DONE 	- No LHS panel
DONE 	- No create button
DONE 	- Search status for item and paper set to archive
DONE 	- Status option in advanced search for items and papers hidden (or read only)
DONE - Any user with AB setting Archive on can search and view archive items irrespective of their author permissions
DONE - User with authoring turned off (Edit AB > Components) - no access to /authoring#/items

angular.element($0).scope()


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s27/165250729

DONE - Back button after viewing and archived item / paper takes back to archive list
DONE - Tops admins, Item and Paper approvers should still get the buttons, edit options and tabs that are hidden below
DONE - List only items / papers for the SQ the user has access to

Item
DONE - View item in read only
DONE - Duplicate and download buttons removed
DONE - Quick edit of title removed
DONE - Quick edit of information fields removed
DONE - Quick edit of item data removed (both in usage and item data tabs)
DONE - Version selection replaced with latest version label
DONE - Edit mapping removed
DONE - Tracking tab removed
DONE - Notes tab removed

Paper
DONE - View paper in read only
DONE - Duplicate, download, upload and publish buttons removed
DONE - Quick edit of title removed
DONE - Version selection replaced with latest version label
DONE - Tracking tab removed
DONE - Notes tab removed

,
"AB_ITEM_APPROVER"


"AB_ITEM_SETTER", 
"AB_ITEM_REVIEWER",
"AB_ITEM_APPROVER"

"AB_PAPER_SETTER", 

,
"AB_PAPER_APPROVER"

AB_PAPER_SENIOR_APPROVER

'FULL_ACCESS' => [
    UserPermission::ITEM_SETTER,
    UserPermission::ITEM_REVIEWER,
    UserPermission::ITEM_APPROVER,
    UserPermission::TYPESETTER,
    UserPermission::ASSET_MANAGER
],


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s28/166732391

ss/archive/166732391

AB_ARCHIVE_READER

Pitkeathly, Item setter



ngb/s29/#166354365


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s29/165993848

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/ReplaceItem/UserCantReplaceItemDuplicateInApprovedPaperCest.php

'Do you want to unpublish this Workflow Template and set it back to private? It will mean that it will no longer be available to paper setters when they create a paper'


'Do you want to unpublish this Workflow Templates and set them back to private? It will mean that they will no longer be available to paper setters when they create a paper'


1ba70c15570d03f078a8dc598918b7ccd4d08559

ss/s28/archive-hotfix




./vendor/bin/codecept run acceptance tests/acceptance/ItemCest.php

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Download/InItem/ItemApproverCanDownloadCest.php:ItemApproverCanDownloadArchived

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Download/InPaper/PaperApproverCanDownloadCest.php:PaperApproverCanDownloadArchived

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Variants/DifferentABSettings/ItemApproverCantDownloadWhenDownloadRoleNotSetCest.php:ItemApproverCantDownloadArchivedWhenDownloadRoleNotSet
./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Variants/DifferentABSettings/PaperApproverCantDownloadWhenDownloadRoleNotSetCest.php:PaperApproverCantDownloadArchivedWhenDownloadRoleNotSet

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/InItem/ItemApproverCantSeeDuplicateButtonCest.php:ItemApproverInReadonlyItemDontSeeDuplicateArchivedButton

$result['updated_at']->toDateTime()->getTimestamp()


steps: [...steps],


./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/ReplaceItem/UserCantReplaceItemDuplicateInApprovedPaperCest.php


./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/ReplaceItem/UserCantReplaceItemDuplicateInPretestPaperCest.php

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/ReplaceItem/UserCantReplaceItemDuplicateInArchivePaperCest.php

./vendor/bin/codecept run acceptance tests/acceptance/Authoring/Duplicate/ReplaceItem/UserCantReplaceItemDuplicateInRejectedPaperCest.php

WhiskersOnKittens1993!
**********************


/var/www/grademaker/resources/views/pages/authoring.blade.php


searchStatusTypes

submitSearch



console.log($scope.searchStatusTypes);

const checkFilterStatus = arr => arr.filter(v => v.value >= 'Archived').length == 1;

if (checkFilterStatus($scope.searchStatusTypes)) {
  url = url+'&status=Archived';
}


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


MF/S30/default_paper_workflow
ss/s30/default_paper_workflow
feature/workflow_templates

Take a paper in draft and move it along using the api endpoints.
Check current files for functionality and copy it over.

Workflow paper actions:
SubmitToReviewAction - Done
TransferAction - Done

AuthorStep - add author transfer - Done

Sort out multi paper transfer: - Done
ItemTransferController
PaperTransferController


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥





draft or change - ng Controller function to check for status


<div ng-repeat="errorArray in errors track by $index">
    <div class="gm-list-item" ng-repeat="error in errorArray track by $index">
        @{{ error }}
    </div>
</div>	

"intro" => "Cyn i chi gyflwyno'r eitem hon i gael ei hadolygu, cwblhewch y meysydd canlynol:",

$2y$10$mTqYXdrbVnh2k0vVBMFTcut9MtANO9Luv7BysGo44KfTRbOcM19aS


lppaperapprover@grademaker.com


#45, #56

_checkPaperItemsStatus

No validation check modal displayed when submitting a paper to 
DONE - typesetting
DONE - pre-test
DONE - exam ready 
DONE - archive 
DONE - but on attempting to continue the process and send it to any of these states get 500 error

when there are items in the paper of status 
DONE - draft 
DONE - change
DONE - review 

- contains_archived_items ??? not seemed to be used



Send paper to archive validation checks not in place - modals not shown
"Some of the items in this paper are in multiple papers so only the paper will be archived.", 
"Some of the items in this paper are still in draft so the paper cannot be archived.", 
"Some of the assets in this paper are not approved. You cannot set the paper to archive until they are approved."



<Acl has={DIGITISING_AB}
    otherwiseRender={() => (<span>Access denied!</span>)}
>
  <div className="col text-center workflow-custom-select">
    <select
      id="end-status"
      value={props.template.endStatus}
      onChange={event => props.handleEditStep(event, 'select', 'endStatus')}
    >{ props.statusList.map((option, i) =>
      <option key={i} value={option.value}>{option.label}</option>)}
    </select>
  </div>
</Acl>


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s31/#167170737

DONE - Author > Create > Paper > APC - Items aren't being added to paper - Permissions issue due to user being paper setter only.
DONE - As a Central Admin/TOPSAdmin using a workflow template in manage, I'm still redirected back to workflow templates instead of the APC generator when I select Go to generator on step 3
DONE - You can access the APC via the Author menu in the top nav, where you can create a new generator, if you do this then you'll be creating a paper the old way and not using a template (as mentioned, adding here since we don't have a story for this and needs to be discussed with Jim)
DONE - existing generators need to use default workflow templates


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s31/#167917988

- Check that are draft items in the paper
- Display checkbox: Also, submit all my draft items in this paper to review.
- If an item fails validation to be sent to review display under the checkbox
The following items are not valid so will not be sent to review with the paper:
- Submit the paper move the relevant item to review in WT


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


selectedAction.params.includeItems = $scope.includeItems;


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s32/#167565796

Item approver / Typesetter / TOPS Admin

Change the version number to the next major (x.0) version number if it is not a major version already

Create a new x.1 version of the item

Change the references to the item in the paper(s) to point to the x.0 version in the item_versions collection

Set the usage on the item for that paper to type = "version"

AND I am left viewing the latest version of the item in edit view


---------------------------

Test issues:

DONE - 1 Examready paper - version modal as expected and everything seems to work
DONE - 1 Archive paper - version modal not shown
DONE - 2 Examready papers - no version modal
DONE - 1 Examready that already have version of item + 1 Examready that do not have version - no version modal

Bug:

When I already have created version of an item for an examready paper 
and the item is now in a second examready paper - 
when I edit the item again, current version is set for both old and newer paper. 
Older paper should remain unthouched.


Also, I noticed a bit later when I tried to edit the item again that I got the version question in the modal. 
If all papers that the item is in already have a version, then I should be free to edit the item. 
Note that I only saw this for an item that was in 2 exam ready papers.


http://local.grademaker.com/author/paper/5d88994d3bd29820ec4fba14
http://local.grademaker.com/author/paper/5d88998c3bd29838d734a327

http://local.grademaker.com/author/item/5d8898de3bd2982558678a04


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s32/#168663840

mongodump -h localhost:27017 -d gm_pre -o local_$(date +%Y-%m-%d)


Issue:
When sending a paper to pretest, current version of all items in that paper 
should be fixed to that paper and all items should get a newer version.

Steps to reproduce
Create a paper and make sure it has items in state pretest and approved.
Check what version the items have.
Send paper to pretest

Expected outcome:
A full version of each item (x.0) is created (if not already existing) and "glued" to the pretest paper.
A new minor version (x.1) version is created

When I click on binoculars in the paper, I see the x.0 version of the item with some green text at the top.

Actual outcome:

No new version of the item is created

When I click on binoculars in the paper, I see the latest version of the paper and no green stuff at the top.






http://local.grademaker.com/author/paper/584685e8cc616ea9334c3c7f


if (typeof item.is_valid !== 'undefined' && item.is_valid === true) {
$scope.itemsForReview.valid.push(item.workflow_id);
} else {
$scope.itemsForReview.invalid.push(item.title);
}

"{{ 
	(
		\Route::currentRouteName() == 'view_archive_item' ? '/archive' : '/author' 
	).'/item/'. $item['id']  . 
	(
		!empty($item['version']) ? '/version/' . $item['version']
	: '') }}{{ $hash ?? $ref }}"


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


https://www.pivotaltracker.com/story/show/168634016


paper was still in Draft
DONE - item that had been transferred to other user had been sent to next step. This should only affect my own items
DONE - today I noticed that item that was in review when paper was submitted were changed to reviewed. Seems like all items are pushed to next step when paper is submitted.


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


https://www.pivotaltracker.com/n/projects/1319040/stories/168514896
ss/s33/#168514896


Info tab:
Paper
DONE - custom mandatory fields

Item
DONE - custom mandatory fields
DONE - blooms taxonomy
DONE - syllabus tab
DONE - mark scheme type
DONE - mcq answer mark scheme
DONE - short answer mark scheme
DONE - extended answer mark scheme
DONE - fill in blank answer mark scheme
DONE - drag & drop answer mark scheme
DONE - fother answer mark scheme


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


https://www.pivotaltracker.com/story/show/169202894
ss/s35/#169202894

DONE - Pass all the data from angular to React using local storage
DONE - Open the React popup from Angular
DONE - Move generate papers functionality from Angular to React
DONE - Attach the workflow to the generated Paper and not the generator
DONE - Remove current workflow functionality from APC - jen/apc/remove-wft
DONE - Workflow template Step 2 overflow issue
DONE - Add selected users from the frontend to backend
DONE - Remove Step 1 from Create paper wizard
DONE - Migration to remove workflow from existing generators - GMC/S35/#169202894_migration
DONE - Workflow templare selection validation
DONE - IF AB admin add private workflows to step 2 dropdown
DONE - User selection validation

Liz:

DONE - Can generate papers with missing mandatory users - if steps with red crosses exist and you select generate then you should get a validation message: 'Nominated users are mandatory for the setter/reviewer role'

DONE - Cannot test this as a paper setter as the 'Workflow template' drop down is missing (see screenshot) - this is fine for TOPSAdmin/Central Admin

DONE - As a TOPSAdmin/Central admin I'm unable to 'Use' any of the paper templates accessed from Manage > Workflows with error in the console: 'createPaper.min.js?v=969:53 Uncaught ReferenceError: setPaperTemplateUse is not defined'

DONE - When AB has no workflow templates and it uses the default WT, you cannot continue as the Generate papers button is greyed out - like the screenshot from the first issue.

DONE - Validation modal is missing when select generate and any of the following is missing: paper name/no. of items to generate/paper versions/search description, with error in console: 'TypeError: Cannot read property 'push' of undefined'

DONE - Validation message now shown when selecting generate when there is missing mandatory users, but the message duplicates each time Generate is selected, and only one error is shown when both setter and reviewer is missing - see screenshot


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


https://www.pivotaltracker.com/story/show/169644125
ss/s36/#169644125

AddNote.js - you can pass the edit there and sort out the permissions for update, permissions to update have been disabled in 35



DONE - When I view a note I wrote for the item / paper on the current workflow step that has no comments then there is a blue 15px 'edit pencil' on the RHS of the header next to the date

When I click on the edit pencil then I am shown the Add note interface but with the content of the note to edit

When I click save then the changes to the note are made with a new datestamp

onUpdateCommentClick


case ActionTypes.UPDATE_NOTE_FAIL:
case ActionTypes.ADD_NOTE_REPLY_FAIL:
case ActionTypes.UPDATE_NOTE_REPLY_FAIL:


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s36/#167515167

APC branch:
ss/s35/#169202894

LP item - Science/AS- R - A - Pre-test

Item approver only!!!!
\Log::debug(\GmAuth::permissions());


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


@if(\Auth::user()->hasRoles(['AB_ITEM_APPROVER']))
    <input type="hidden" name="approver_edit" value="1"/>
@endif



<Route path="/author/paper/edit/" component={DuplicatePaperSelectWorkflow} />




Sort out getWorkflowTemplateSteps in paper generator


use admin
db.createUser(
  {
    user: "mongo_user",
    pwd: "mz$Ww9s74^ez",
    roles: [ { role: "userAdminAnyDatabase", db: "admin" }, "readWriteAnyDatabase" ]
  }
)


mongo --port 27017  --authenticationDatabase "admin" -u "mongo_user" -p


ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥


ss/s36/#167648173
ss/s36/#167515167

DONE - Selection is inverted if while selecting the workflow is cancelled.
DONE - Paper is not being duplicated (by selecting new wt) on Special and Full
DONE - If Items and Papers are selected to change workflow, dialogbox gets out of screen
DONE - Font size issue on duplicate item in view item
DONE - Can continue without selecting mandatory users on the WT
DONE - Item in review : react-dom.development.js:55 Target container is not a DOM element
DONE - Item WT dropdown missing from paper duplication
DONE - QA forms not attached to duplicated Item if there is a qaform already on the workflow
DONE - No confirmation message after item duplication has been sucessful
DONE - WT lists for item / paper duplication should be filtered by the SQ of the item / paper

---------------------

DONE - Move notes and duplicate to using the new error => error for api promise
DONE - Jen - Add advance option to papers similar to items and move the workflow templates in there
DONE - Issue when changing template for items in a paper when you are a paper setter only - hide the option for items for any user that does not have item setter or item approver roles
DONE - Graham - When an AB has workflow templates enabled but the SQ does not have any template the option to change workflow is still there
DONE - Graham - Duplicating papers shows me to select the workflow template, and then keeps spinning. When duplicating one works, one shows the wt and fails, one works, one fails, and so on.
DONE - For a subject qualification with only one template for item and one for paper, when I try to duplicate paper and un-tick boxes to keep current template, duplication breaks
DONE- Nick - Investigate missing workflow templates names.

Set current item/paper workflow template when the user selects to change the paper/item workflow template
this.props.item.presetTemplate

ss/s36/#167648173
